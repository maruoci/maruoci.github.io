---
title: 正则表达式的使用
date: 2018-11-19 21:16:30
categories:
- 正则表达式
tags:
- 正则表达式
---

> 梳理常用的正则表达式及表达式的基础语法

## 参考资料

  [菜鸟教程-正则表达式](http://www.runoob.com/regexp/regexp-metachar.html)   

<!-- more-->

## 正则表达式-元字符

**常用**

| 模式 |  描述 |
|:----- |:-----|
|   \       |将下一个字符标记为一个特殊字符、或一个原义字符。如\n 匹配换行|
|   ^       |匹配字符的开始位置|
|   $       |匹配字符的结束位置|
|   *       |匹配子表达式0-n次，等价于{0,}|
|   +       |匹配子表达式1-n次，等价于{1,}|
|   ?       |匹配子表达式0-1次，等价于{0,1}|
|  {n}      |匹配确定的n次,n为非负整数|
| {n,}      |至少匹配n次，n为非负整数|  
| {n,m}     |至少匹配n次，最多m次|
|   ?       |当紧跟任一限定符时，匹配模式为非贪婪模式,示例1|
|   .       |匹配除(\n,\r)外的任何单字符|
|(pattern)  |匹配 pattern 并获取这一匹配|
|   x｜y   　|匹配 x 或 y|
| \[xyz]    |匹配xyz中的任一字符|
| \[^xyz]   |负值字符集合，匹配未包含的任一字符|
| \[a-z]    |字符范围，匹配a-z内任一字符|
| \[^a-z]   |负值字符范围，匹配不再范围内的任一字符|
| \d        |匹配一个数字字符。等价于 \[0-9]。|
| \D        |匹配一个非数字字符。等价于 \[^0-9]|
|\s         |匹配任何空白字符，包括空格、制表符、换页符等等。等价于 \[ \f\n\r\t\v]。|
|\S	        |匹配任何非空白字符。等价于 \[^ \f\n\r\t\v]。|
|\w         |匹配字母、数字、下划线。等价于'\[A-Za-z0-9_]'。|
|\W         |匹配非字母、数字、下划线。等价于 '\[^A-Za-z0-9_]'。|

**不常用**

| 模式 |  描述 |
|:----- |:-----|
|(?:pattern)|匹配 pattern 但不获取匹配结果，也就是说这是一个非获取匹配|
|(?=pattern)|正向肯定预查（look ahead positive assert），在任何匹配pattern的字符串开始处匹配查找字符串。|
|(?!pattern)|正向否定预查(negative assert)，在任何不匹配pattern的字符串开始处匹配查找字符串。|
|(?<=pattern)|反向(look behind)肯定预查，与正向肯定预查类似，只是方向相反。|
|(?<!pattern)|反向否定预查，与正向否定预查类似，只是方向相反。|
| \b        |匹配一个单词边界          |
| \B        |匹配非单词边界          |
| \cx       |匹配由x指明的控制字符    |
|\f         |匹配一个换页符。等价于 \x0c 和 \cL。|
|\n         |匹配一个换行符。等价于 \x0a 和 \cJ。|
|\r         |匹配一个回车符。等价于 \x0d 和 \cM。|
|\t         |匹配一个制表符。等价于 \x09 和 \cI。|
|\v         |匹配一个垂直制表符。等价于 \x0b 和 \cK。|
|\xn        |匹配 n，其中 n 为十六进制转义值。十六进制转义值必须为确定的两个数字长。例如，'\x41' 匹配 "A"。'\x041' 则等价于 '\x04' & "1"。正则表达式中可以使用 ASCII 编码。|
|\num       |匹配 num，其中 num 是一个正整数。对所获取的匹配的引用。例如，'(.)\1' 匹配两个连续的相同字符。|
|\n         |标识一个八进制转义值或一个向后引用。如果 \n 之前至少 n 个获取的子表达式，则 n 为向后引用。否则，如果 n 为八进制数字 (0-7)，则 n 为一个八进制转义值。|
|\nm        |标识一个八进制转义值或一个向后引用。如果 \nm 之前至少有 nm 个获得子表达式，则 nm 为向后引用。如果 \nm 之前至少有 n 个获取，则 n 为一个后跟文字 m 的向后引用。如果前面的条件都不满足，若 n 和 m 均为八进制数字 (0-7)，则 \nm 将匹配八进制转义值 nm。|
|\nml       |如果 n 为八进制数字 (0-3)，且 m 和 l 均为八进制数字 (0-7)，则匹配八进制转义值 nml。|
|\un        |匹配 n，其中 n 是一个用四个十六进制数字表示的 Unicode 字符。例如， \u00A9 匹配版权符号 (?)。

**示例说明**

1. ? 的非贪婪匹配

2. (pattern)的匹配

3. (?:pattern)、(?=pattern)、(?!pattern)的匹配。

4. (?<=pattern)、(?<!pattern)的匹配。

5. \b 单词边界匹配。 

6. \cx 控制字符匹配。
 
## 正则的Python库

 re库是Python的标准库，用于字符串匹配。
 
 re库的主要函数有：

| 函数 |  说明 |
|:----------|:----------|
| search()  | 在一个字符串中搜索匹配正则表达式的第一个位置，返回match对象|
| match()   |从一个字符串的开始位置起匹配正则表达式，返回match对象|
| findall() |搜索字符串，以列表类型返回全部能匹配的子串|
| split()   |将一个字符串按照正则表达式匹配结果进行分割，返回列表类型|
| finditer()|搜索字符串，返回一个匹配结果的迭代类型，每个迭代元素是match对象|
| sub()     |在一个字符串中替换所有匹配正则表达式的子串，返回替换后的字符串|

**修饰符**

| 修饰 |  说明 |
|:----------|:----------|
|re.I       |使大小写不敏感|
|re.L       |使本地化识别匹配|
|re.M       |多行匹配，影响^和$|
|re.S       |使.匹配换行在内的所有字符|
|re.U       |按Unicode字符集解析|
|re.X       |该标志通过给予你更灵活的格式以便你将正则表达式写得更易于理解|

**示例说明**

1. re.match()

 主要用作验证字符串是否匹配正则规则，如：手机号、邮箱等的验证。
 
 ```
 Match match(
    pattern,  # 正则表达式
    string,   # 待匹配字符串
    flags=0   # 修饰符
 )
 import re
 email2 = '471989023@qq.com'
 t = re.match('[\w]+@[\w]+[.com|.cn|.net]+', email2)
 ```

2. re.search()

 查找符合正则规则的字符串，找到满足条件的就返回。否则返回None
 
 ```
 Match search(
    pattern,  # 正则表达式
    string,   # 待匹配字符串
    flags=0   # 修饰符
 )
 import re
 msg = 'hello 123 world word 4567'
 t2 = re.search('[\d]+', msg)
 print(t2)
 print(t2.group())
 ## 123
 ```

3. re.findall()

 获取匹配正则表达式的所有字符串。 
 
 ```
 list findall(
    pattern,  # 正则表达式
    string,   # 待匹配字符串
    flags=0   # 修饰符
 )
 msg = 'hello 123 world word 4567'
 t2 = re.findall('[\d]+', msg)
 print(t2)
 ## ['123','4567']
 ```

4. re.sub()

 类似于replace方法，可以将匹配的数据替换掉。(在爬虫匹配数据时，可以使用该方法将原始数据处理以后再提取可能会事半功倍)
 
 ```
 msg = 'hello 123 world word 4567'
 t3 = re.sub('[\d]+', 'Mark', msg)
 print(t3)
 # hello mk world word mk
 ```

5. re.compile()

 通过该方法将正则字符串编译成正则表达式对象，可重复使用。

## 常用的正则匹配表达式

 **手机号验证**
 
 **邮箱验证**
 
 **IP验证**
 
 **座机号验证**
 
 **身份证号验证**

## 名词释义

 **限定符**
 
 限定符用来指定正则表达式的一个给定组件必须要出现多少次才能满足匹配。有 * 或 + 或 ? 或 {n} 或 {n,} 或 {n,m} 共6种。
 
 **匹配的贪婪与非贪婪模式**
 
 贪婪模式为尽可能多的匹配满足条件的字符串；而非贪婪模式则是尽可能少的匹配。
 
 诸如字符串'ozzz', z+ 为贪婪模式，匹配zzz，而z+? 则为非贪婪模式，匹配z。